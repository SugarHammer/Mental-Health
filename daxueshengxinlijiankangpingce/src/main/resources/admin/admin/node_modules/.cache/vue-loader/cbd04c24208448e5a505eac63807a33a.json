{"remainingRequest":"E:\\GitHub\\weixin\\MentalHealth\\daxueshengxinlijiankangpingce\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\GitHub\\weixin\\MentalHealth\\daxueshengxinlijiankangpingce\\src\\main\\resources\\admin\\admin\\src\\views\\modules\\zhixunshiChat\\add-or-update.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\GitHub\\weixin\\MentalHealth\\daxueshengxinlijiankangpingce\\src\\main\\resources\\admin\\admin\\src\\views\\modules\\zhixunshiChat\\add-or-update.vue","mtime":1679302512074},{"path":"E:\\GitHub\\weixin\\MentalHealth\\daxueshengxinlijiankangpingce\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\GitHub\\weixin\\MentalHealth\\daxueshengxinlijiankangpingce\\src\\main\\resources\\admin\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\GitHub\\weixin\\MentalHealth\\daxueshengxinlijiankangpingce\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\GitHub\\weixin\\MentalHealth\\daxueshengxinlijiankangpingce\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaWQ6ICIiLAogICAgICAgICAgICBydWxlRm9ybToge30sCiAgICAgICAgICAgIGRhdGFMaXN0OiBbXSwKICAgICAgICAgICAgY2hhdERhdGU6IHt9LAogICAgICAgICAgICBydWxlczogewogICAgICAgICAgICAgICAgemhpeHVuc2hpQ2hhdFJlcGx5VGV4dDogW3sKICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5Zue5aSN5YaF5a655LiN6IO95Li656m6IiwKICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGludGVyOiBudWxsCiAgICAgICAgfTsKICAgIH0sCiAgICBwcm9wczogWyJwYXJlbnQiXSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvLyDliJ3lp4vljJYKICAgICAgICBpbml0KHJvdykgewogICAgICAgICAgICB0aGlzLmNoYXREYXRlID0gcm93CiAgICAgICAgICAgIHRoaXMuaWQgPSByb3cueW9uZ2h1SWQ7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIF90aGlzLmdldExpc3QoKTsKICAgICAgICAgICAgdmFyIGludGVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgICAgIH0sIDUwMDApCiAgICAgICAgICAgIHRoaXMuaW50ZXIgPSBpbnRlcjsKICAgICAgICB9LAoKICAgICAgICBnZXRMaXN0KCkgewogICAgICAgICAgICBsZXQgcGFyYW1zID0gewogICAgICAgICAgICAgICAgeW9uZ2h1SWQ6IHRoaXMuaWQsCiAgICAgICAgICAgICAgICBvcmRlcjonYXNjJywKICAgICAgICAgICAgICAgIGxpbWl0OicxMDAwMDAwMCcsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgICAgICAgICB1cmw6ICd6aGl4dW5zaGlDaGF0L3BhZ2UnLAogICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgICAgICAgIH0pLnRoZW4oKHsKICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEKICAgICAgICAgICAgICAgICAgICAgfSkgPT4gewogICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ydWxlRm9ybS55b25naHVJZCA9IHRoaXMuaWQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdCA9IGRhdGEuZGF0YS5saXN0OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGRhdGEubXNnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAvL+WbvueJhwogICAgICAgIHpoaXh1bnNoaUNoYXRSZXBseVBob3RvVXBsb2FkQ2hhbmdlKGZpbGVVcmxzKSB7CiAgICAgICAgICAgIHRoaXMucnVsZUZvcm0uemhpeHVuc2hpQ2hhdFJlcGx5UGhvdG8gPSBmaWxlVXJsczsKICAgICAgICAgICAgdGhpcy5hZGRFZGl0VXBsb2FkU3R5bGVDaGFuZ2UoKQogICAgICAgIH0sCiAgICAgICAgLy8g5o+Q5LqkCiAgICAgICAgb25TdWJtaXQoKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnNbInJ1bGVGb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgICAgICAgICAgdGhpcy5ydWxlRm9ybS5yZXBseVRpbWUgPSB0aGlzLmdldEN1ckRhdGVUaW1lKCkKICAgICAgICAgICAgICAgIHRoaXMucnVsZUZvcm0uemhpeHVuc2hpQ2hhdFR5cGVzID0gMgogICAgICAgICAgICAgICAgdGhpcy5ydWxlRm9ybS5yZXBseVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ3poaXh1bnNoaUNoYXQvc2F2ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLnJ1bGVGb3JtCiAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLmk43kvZzmiJDlip8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ1bGVGb3JtLnpoaXh1bnNoaUNoYXRSZXBseVRleHQgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydWxlRm9ybS56aGl4dW5zaGlDaGF0UmVwbHlQaG90byA9ICIiOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGF0RGF0ZS56aHVhbmd0YWlUeXBlcyA9IDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICd6aGl4dW5zaGlDaGF0L3VwZGF0ZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuY2hhdERhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA9PiB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGRhdGEubXNnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8vIOi/lOWbngogICAgICAgIGJhY2soKSB7CiAgICAgICAgICAgIHRoaXMucGFyZW50LnNob3dGbGFnID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldERhdGFMaXN0KCk7CiAgICAgICAgICAgIGlmICh0aGlzLmludGVyKSB7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Owo="},{"version":3,"sources":["add-or-update.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add-or-update.vue","sourceRoot":"src/views/modules/zhixunshiChat","sourcesContent":["<template>\r\n    <div>\r\n        <el-form class=\"detail-form-content\" ref=\"ruleForm\" :model=\"ruleForm\" :rules=\"rules\" label-width=\"80px\">\r\n            <div class=\"chat-content\">\r\n                <div v-bind:key=\"item.id\" v-for=\"item in dataList\">\r\n                    <div v-if=\"item.zhixunshiChatIssueText\" class=\"left-content\">\r\n                        <el-alert class=\"text-content\" :title=\"item.zhixunshiChatIssueText\" :closable=\"false\"\r\n                                  type=\"success\">\r\n                            <img v-if=\"item.zhixunshiChatIssuePhoto\" :src=\"$base.url+item.zhixunshiChatIssuePhoto\"\r\n                                 width=\"100\" height=\"100\">\r\n                        </el-alert>\r\n                        <el-alert class=\"text-content\" :title=\"item.issueTime\" :closable=\"false\" type=\"success\"></el-alert>\r\n                    </div>\r\n                    <div v-if=\"item.zhixunshiChatReplyText\" class=\"right-content\">\r\n                        <el-alert class=\"text-content\" :title=\"item.zhixunshiChatReplyText\" :closable=\"false\"\r\n                                  type=\"warning\">\r\n                            <img v-if=\"item.zhixunshiChatReplyPhoto\" :src=\"$base.url+item.zhixunshiChatReplyPhoto\"\r\n                                 width=\"100\" height=\"100\">\r\n                        </el-alert>\r\n                        <el-alert class=\"text-content\" :title=\"item.replyTime\" :closable=\"false\" type=\"warning\"></el-alert>\r\n                    </div>\r\n                    <div class=\"clear-float\"></div>\r\n                </div>\r\n            </div>\r\n            <div class=\"clear-float\"></div>\r\n            <el-form-item label=\"回复\" prop=\"zhixunshiChatReplyText\">\r\n                <el-input v-model=\"ruleForm.zhixunshiChatReplyText\" placeholder=\"回复\" clearable></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit\">回复</el-button>\r\n                <el-button @click=\"back()\">返回</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                id: \"\",\r\n                ruleForm: {},\r\n                dataList: [],\r\n                chatDate: {},\r\n                rules: {\r\n                    zhixunshiChatReplyText: [{\r\n                        required: true,\r\n                        message: \"回复内容不能为空\",\r\n                        trigger: \"blur\"\r\n                    }]\r\n                },\r\n                inter: null\r\n            };\r\n        },\r\n        props: [\"parent\"],\r\n        methods: {\r\n            // 初始化\r\n            init(row) {\r\n                this.chatDate = row\r\n                this.id = row.yonghuId;\r\n                var _this = this;\r\n                _this.getList();\r\n                var inter = setInterval(function() {\r\n                    _this.getList();\r\n                }, 5000)\r\n                this.inter = inter;\r\n            },\r\n\r\n            getList() {\r\n                let params = {\r\n                    yonghuId: this.id,\r\n                    order:'asc',\r\n                    limit:'10000000',\r\n                }\r\n                this.$http({\r\n                    url: 'zhixunshiChat/page',\r\n                    method: \"get\",\r\n                    params: params\r\n                }).then(({\r\n                             data\r\n                         }) => {\r\n                    if (data && data.code === 0) {\r\n                        this.ruleForm.yonghuId = this.id;\r\n                        this.dataList = data.data.list;\r\n                    } else {\r\n                        this.$message.error(data.msg);\r\n                    }\r\n                });\r\n            },\r\n            //图片\r\n            zhixunshiChatReplyPhotoUploadChange(fileUrls) {\r\n                this.ruleForm.zhixunshiChatReplyPhoto = fileUrls;\r\n                this.addEditUploadStyleChange()\r\n            },\r\n            // 提交\r\n            onSubmit() {\r\n                this.$refs[\"ruleForm\"].validate(valid => {\r\n                    this.ruleForm.replyTime = this.getCurDateTime()\r\n                    this.ruleForm.zhixunshiChatTypes = 2\r\n                    this.ruleForm.replyTime = new Date().getTime()\r\n                    if (valid) {\r\n                        this.$http({\r\n                            url: 'zhixunshiChat/save',\r\n                            method: \"post\",\r\n                            data: this.ruleForm\r\n                        }).then(({\r\n                                     data\r\n                                 }) => {\r\n                            if (data && data.code === 0) {\r\n                                this.$message({\r\n                                    message: \"操作成功\",\r\n                                    type: \"success\",\r\n                                    duration: 1500,\r\n                                    onClose: () => {\r\n                                        this.getList();\r\n                                        this.ruleForm.zhixunshiChatReplyText = \"\";\r\n                                        this.ruleForm.zhixunshiChatReplyPhoto = \"\";\r\n\r\n                                        this.chatDate.zhuangtaiTypes = 2\r\n                                        this.$http({\r\n                                            url: 'zhixunshiChat/update',\r\n                                            method: \"post\",\r\n                                            data: this.chatDate\r\n                                        }).then(({\r\n                                                     data\r\n                                                 }) => {});\r\n                                    }\r\n                                });\r\n                            } else {\r\n                                this.$message.error(data.msg);\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            },\r\n            // 返回\r\n            back() {\r\n                this.parent.showFlag = false;\r\n                this.parent.getDataList();\r\n                if (this.inter) {\r\n                    clearInterval(this.inter);\r\n                }\r\n            }\r\n        }\r\n    };\r\n</script><style lang=\"scss\">\r\n    .chat-content {\r\n        margin-left: 80px;\r\n        padding-bottom: 60px;\r\n        width: 500px;\r\n        margin-bottom: 30px;\r\n        max-height: 300px;\r\n        height: 300px;\r\n        overflow-y: scroll;\r\n        border: 1px solid #eeeeee;\r\n\r\n    .left-content {\r\n        float: left;\r\n        margin-bottom: 10px;\r\n        padding: 10px;\r\n    }\r\n\r\n    .right-content {\r\n        float: right;\r\n        margin-bottom: 10px;\r\n        padding: 10px;\r\n    }\r\n    }\r\n\r\n    .clear-float {\r\n        clear: both;\r\n    }\r\n</style>\r\n\r\n"]}]}